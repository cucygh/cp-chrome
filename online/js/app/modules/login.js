define(["backbone","md5","jquery"],function(e,t,n){var r=e.Model.extend({isOn:!1,msg:"初始化",initialize:function(){var e=this;chrome.cookies.get({url:"http://*.cp.360.cn",name:"Q"},function(t){t?e.set({isOn:!0}):e.set({isOn:!1})})},login:function(e,r,i){var s=this,o=this.validate(e,r);if(o.pass){var u={account:e,password:t(r),isKeepAlive:i,userType:"360",union:"360",t:+(new Date)},a="json",f="http://cp.360.cn/user/unionLogin/?"+n.param(u);this.fetch({url:f,success:function(e){s.set({isOn:!0})},error:function(e){s.set({msg:"errl"})}})}else this.set({msg:"验证失败"})},exit:function(){var t="http://cp.360.cn/user/logout/?rt="+new Date,n=this;e.sync("read",this,{url:t,dataType:"html",success:function(){n.set({isOn:!1})},error:function(){n.set({msg:"退出失败"})}})},validate:function(e,t){var n;return e.toString().trim()!=""&&t.toString().trim()!=""?n={pass:!0,msg:"pass"}:n={pass:!1,msg:"账号或密码不能为空！"},n}});return r});